<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · MeshArrays</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">MeshArrays</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Install-and-Test-1"><span>Install &amp; Test</span></a></li><li><a class="tocitem" href="#Basic-Examples-1"><span>Basic Examples</span></a></li><li><a class="tocitem" href="#Earth-Model-Grids-1"><span>Earth Model Grids</span></a></li></ul></li><li><a class="tocitem" href="main/">Main</a></li><li><a class="tocitem" href="detail/">Detail</a></li><li><a class="tocitem" href="API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="MeshArrays.jl-documentation-1"><a class="docs-heading-anchor" href="#MeshArrays.jl-documentation-1">MeshArrays.jl documentation</a><a class="docs-heading-anchor-permalink" href="#MeshArrays.jl-documentation-1" title="Permalink"></a></h1><p><code>MeshArrays.jl</code> defines an array type that can contain / organize / distribute collections of inter-connected arrays as done in climate models (see <em>Earth Model Grids</em> below). The <code>MeshArray</code> type is a sub-type of <code>AbstractArray</code> with an <code>outer array</code> where each element is itself a 2D <code>inner array</code>. This setup potentially allows different choices for the outer and inner arrays – for example <code>DistributedArrays</code> and <code>AxisArrays</code>, respectively, could be an option.</p><p><code>MeshArrays.jl</code> thus provides a simple but general solution to analyze or e.g. simulate climate system variables. The internals of a <code>MeshArray</code> are regulated by a few index ranges, array size specifications, and inter-connection rules that are encoded in a <code>gcmgrid</code>. A second, also lightweight, structure called <code>varmeta</code> contains the <code>MeshArray</code> variable name, unit, and position on the grid. A general approach like this is useful because climate models often involve advanced domain decompositions (see <em>Earth Model Grids</em>), and many variables, which puts a burden on users. </p><p>Encoding the grid specification inside the <code>MeshArray</code> data type allows user to manipulate <code>MeshArray</code>s just like they would manipulate <code>Array</code>s without having to keep track of model grid details. In addition, the provided <code>exchange</code> methods readily transfer data between connected subdomains to extend them at the sides. This makes it easy to compute e.g. partial derivatives and related operators like gradients, curl, or divergences over subdomain edges as often needed for precise computation of transports, budgets, etc using climate model output.</p><p><code>MeshArrays.jl</code> was first introduced as as <code>gcmfaces.jl</code> in a <a href="https://youtu.be/RDxAy_zSUvg">JuliaCon-2018 presentation</a>. This <a href="https://github.com/gaelforget/GlobalOceanNotebooks.git">notebook folder</a> demonstrates how its data structures can be used to accurately analyze the General Ocean Circulation. Examples include computations of <a href="https://doi.org/10.1038/s41561-019-0333-7">ocean heat transport</a> and streamfunctions that are important and widely studied aspects of the climate system.</p><p><em>Contents:</em></p><ul><li><a href="#MeshArrays.jl-documentation-1">MeshArrays.jl documentation</a></li><ul><li><a href="#Install-and-Test-1">Install &amp; Test</a></li><li><a href="#Basic-Examples-1">Basic Examples</a></li><li><a href="#Earth-Model-Grids-1">Earth Model Grids</a></li><li><a href="main/#Main-Features-1">Main Features</a></li><ul><li><a href="main/#Embedded-Meta-Data-1">Embedded Meta Data</a></li><li><a href="main/#Examples,-Interpolation,-and-Plots-1">Examples, Interpolation, &amp; Plots</a></li></ul><li><a href="detail/#Additional-Detail-1">Additional Detail</a></li><li><a href="API/#API-Guide-1">API Guide</a></li></ul></ul><h2 id="Install-and-Test-1"><a class="docs-heading-anchor" href="#Install-and-Test-1">Install &amp; Test</a><a class="docs-heading-anchor-permalink" href="#Install-and-Test-1" title="Permalink"></a></h2><pre><code class="language-none">using Pkg
Pkg.add(&quot;MeshArrays&quot;)
Pkg.test(&quot;MeshArrays&quot;)</code></pre><p><code>Julia</code>&#39;s package manager, <code>Pkg.jl</code>, is documented the <a href="https://docs.julialang.org/en/v1/">main Julia doc</a> and <a href="https://julialang.github.io/Pkg.jl/v1/">here in details</a>.</p><h2 id="Basic-Examples-1"><a class="docs-heading-anchor" href="#Basic-Examples-1">Basic Examples</a><a class="docs-heading-anchor-permalink" href="#Basic-Examples-1" title="Permalink"></a></h2><p>Examples below (1) generate a grid configuration, (2) seed a 2D field of random noise, (3) smooth out this field, and (4) plot subdomain arrays. Smoothing is done via a lateral diffusion equation through time to illustrate how <code>MeshArray</code> computes partial derivatives &amp; transfers data between neighboring subdomains. Examples 2 &amp; 3 illustrate grid configurations commonly used in global models.</p><p><strong>[A]</strong> <em>16 subdomains</em>, with <em>40x40 grid points</em> each, covering a <em>doubly periodic domain</em></p><pre><code class="language-none">using MeshArrays; p=dirname(pathof(MeshArrays))
γ,Γ=GridOfOnes(&quot;PeriodicDomain&quot;,16,20)

include(joinpath(p,&quot;../examples/Demos.jl&quot;))
(xi,xo,_,_)=demo2(Γ);
show(xo)

using Plots; plotlyjs()
include(joinpath(p,&quot;../examples/Plots.jl&quot;))
heatmap(xo,clims=(-0.25,0.25))</code></pre><table><tr><th style="text-align: center">Grid scale noise</th><th style="text-align: center">Smoothed noise</th></tr><tr><td style="text-align: center"><img src="https://raw.githubusercontent.com/gaelforget/MeshArrays.jl/master/docs/images/noise_raw_16tiles.png" alt="raw"/></td><td style="text-align: center"><img src="https://raw.githubusercontent.com/gaelforget/MeshArrays.jl/master/docs/images/noise_smooth_16tiles.png" alt="smooth"/></td></tr></table><p><strong>[B]</strong> <em>6 subdomains</em>, with <em>100x100 points</em> each, covering the <em>six faces of a cube</em></p><pre><code class="language-none">γ,Γ=GridOfOnes(&quot;CubeSphere&quot;,6,100)
D=demo2(Γ)</code></pre><p><strong>[C]</strong> Global Model Grid with <em>5 uneven subdomains</em>, <em>variable spacing</em>, &amp; <em>continents</em></p><p><em>This requires downloading a pre-defined <a href="http://www.geosci-model-dev.net/8/3071/2015/">global ocean grid</a> from the <a href="https://mitgcm.readthedocs.io/en/latest/">MITgcm community</a>.</em></p><pre><code class="language-none">#run(`git clone https://github.com/gaelforget/GRID_LLC90`)
Γ=GridLoad(GridSpec(&quot;LatLonCap&quot;,&quot;GRID_LLC90/&quot;))
D=demo2(Γ)
heatmap(D[2],clims=(-0.25,0.25))</code></pre><h2 id="Earth-Model-Grids-1"><a class="docs-heading-anchor" href="#Earth-Model-Grids-1">Earth Model Grids</a><a class="docs-heading-anchor-permalink" href="#Earth-Model-Grids-1" title="Permalink"></a></h2><p>-<img src="https://raw.githubusercontent.com/gaelforget/MeshArrays.jl/master/docs/images/sphere_all.png" alt="EarthGrids"/></p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="main/">Main »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 17 May 2020 16:15">Sunday 17 May 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
