<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API documentation · MeshArrays</title><meta name="title" content="API documentation · MeshArrays"/><meta property="og:title" content="API documentation · MeshArrays"/><meta property="twitter:title" content="API documentation · MeshArrays"/><meta name="description" content="Documentation for MeshArrays."/><meta property="og:description" content="Documentation for MeshArrays."/><meta property="twitter:description" content="Documentation for MeshArrays."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MeshArrays</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../start/">Get Started</a></li><li><a class="tocitem" href="../main/">Main Features</a></li><li><a class="tocitem" href="../tutorials/">Notebook Tutorials</a></li><li class="is-active"><a class="tocitem" href>API documentation</a><ul class="internal"><li><a class="tocitem" href="#1.-Data-Structures"><span>1. Data Structures</span></a></li><li><a class="tocitem" href="#2.-Grids-And-I/O"><span>2. Grids And I/O</span></a></li><li><a class="tocitem" href="#3.-Interpolation"><span>3. Interpolation</span></a></li><li><a class="tocitem" href="#4.-Vector-Fields"><span>4. Vector Fields</span></a></li><li><a class="tocitem" href="#5.-Integration"><span>5. Integration</span></a></li><li><a class="tocitem" href="#6.-Grid-Data-Sets"><span>6. Grid Data Sets</span></a></li><li><a class="tocitem" href="#7.-Polygons"><span>7. Polygons</span></a></li><li><a class="tocitem" href="#8.-Other"><span>8. Other</span></a></li></ul></li><li><span class="tocitem">Miscellaneous</span><ul><li><a class="tocitem" href="../detail/">Internals</a></li><li><a class="tocitem" href="../videos/">Video Examples</a></li><li><a class="tocitem" href="../dev/">Developer Notebooks</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API documentation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaClimate/MeshArrays.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/master/docs/src/API.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-documentation"><a class="docs-heading-anchor" href="#API-documentation">API documentation</a><a id="API-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-documentation" title="Permalink"></a></h1><h2 id="1.-Data-Structures"><a class="docs-heading-anchor" href="#1.-Data-Structures">1. Data Structures</a><a id="1.-Data-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Data-Structures" title="Permalink"></a></h2><p>By default, the <code>MeshArray</code> type is an alias to <a href="#MeshArrays.gcmarray"><code>MeshArrays.gcmarray</code></a>.</p><article><details class="docstring" open="true"><summary id="MeshArrays.AbstractMeshArray"><a class="docstring-binding" href="#MeshArrays.AbstractMeshArray"><code>MeshArrays.AbstractMeshArray</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AbstractMeshArray{T, N}</code></pre><p>Subtype of AbstractArray{T, N}</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/main.jl#L4-L8">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.gcmarray"><a class="docstring-binding" href="#MeshArrays.gcmarray"><code>MeshArrays.gcmarray</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">gcmarray{T, N, AT}</code></pre><p>gcmarray data structure. Available constructors:</p><pre><code class="language-julia hljs">gcmarray{T,N,AT}(grid::gcmgrid,meta::varmeta,f::Array{AT,N},
         fSize::Array{NTuple{N, Int}},fIndex::Array{Int,1},v::String)

gcmarray(grid::gcmgrid,f::Array{Array{T,2},N}) where {T,N}
gcmarray(grid::gcmgrid,f::Array{Array{T,N},1}) where {T,N}

gcmarray(grid::gcmgrid,fSize::Array{NTuple{N, Int}},fIndex::Array{Int,1})
gcmarray(&lt;same as above&gt;,n3::Int)
gcmarray(&lt;same as above&gt;,n3::Int,n4::Int)

gcmarray(grid::gcmgrid)
gcmarray(grid::gcmgrid,::Type{T})
gcmarray(grid::gcmgrid,::Type{T},n3::Int)
gcmarray(grid::gcmgrid,::Type{T},n3::Int,n4::Int)

gcmarray(A::Array{T,N};meta::varmeta=defaultmeta)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/gcmarray.jl#L2-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.gcmgrid"><a class="docstring-binding" href="#MeshArrays.gcmgrid"><code>MeshArrays.gcmgrid</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">gcmgrid</code></pre><p>gcmgrid data structure. Available constructors:</p><pre><code class="language-julia hljs">gcmgrid(path::String, class::String, nFaces::Int, 
        fSize::Array{NTuple{2, Int},1},
        ioSize::Union{NTuple{2, Int},Array{Int64,2}},
        ioPrec::Type, read::Function, write::Function)</code></pre><p>The <code>class</code> can be set to &quot;LatLonCap&quot;, &quot;CubeSphere&quot;, &quot;PeriodicChannel&quot;, &quot;PeriodicDomain&quot;.</p><p>For example, A periodic channel (periodic in the x direction) of size 360 by 160, can be defined as follows.</p><pre><code class="language-julia hljs">path=MeshArrays.Dataset(&quot;GRID_LL360&quot;)
class=&quot;PeriodicChannel&quot;
ioSize=(360, 160)
ioPrec=Float32

γ=gcmgrid(path, class, 1, [ioSize], ioSize, ioPrec, read, write)

Γ=GridLoad(γ)    </code></pre><p>Please refer to <code>GridSpec</code> and <code>UnitGrid</code> for more info related to <code>gcmgrid</code> options.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/main.jl#L11-L39">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.varmeta"><a class="docstring-binding" href="#MeshArrays.varmeta"><code>MeshArrays.varmeta</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">varmeta</code></pre><p>varmeta data structure. By default, <code>unit</code> is <code>missing</code> (non-dimensional), <code>position</code> is <code>fill(0.5,3)</code> (cell center), time is <code>missing</code>, and <code>name</code> / <code>long_name</code> is <code>unknown</code>.</p><p>Available constructors:</p><pre><code class="language-julia hljs">varmeta(unit::Union{Unitful.Units,Number,Missing},position::Array{Float64,1},
        time::Union{DateTime,Missing,Array{DateTime,1}},name::String,long_name::String)</code></pre><p>And:</p><p><code>defaultmeta = varmeta(missing,fill(0.5,3),missing,&quot;unknown&quot;,&quot;unknown&quot;)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/main.jl#L70-L87">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.gridpath"><a class="docstring-binding" href="#MeshArrays.gridpath"><code>MeshArrays.gridpath</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">gridpath</code></pre><p>gridpath data structure.</p><pre><code class="language-julia hljs">path=MeshArrays.Dataset(&quot;GRID_LLC90&quot;)
γ=GridSpec(&quot;LatLonCap&quot;,path)
Γ=GridLoad(γ;option=&quot;light&quot;)
lons=[-68 -63]; lats=[-54 -66]; name=&quot;Drake Passage&quot;
Trsct=Transect(name,lons,lats,Γ)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/main.jl#L241-L253">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.gridmask"><a class="docstring-binding" href="#MeshArrays.gridmask"><code>MeshArrays.gridmask</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">gridmask</code></pre><p>gridmask data structure.</p><pre><code class="language-julia hljs">G,M,files=Integration.example()
M</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/main.jl#L280-L289">source</a></section></details></article><h3 id="More"><a class="docs-heading-anchor" href="#More">More</a><a id="More-1"></a><a class="docs-heading-anchor-permalink" href="#More" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="MeshArrays.gcmvector"><a class="docstring-binding" href="#MeshArrays.gcmvector"><code>MeshArrays.gcmvector</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">gcmvector{T, N}</code></pre><p>gcmvector data structure that can be used for   subsetting and indexing into a gcmarray.</p><pre><code class="language-julia hljs">gcmvector{T,N}(grid::gcmgrid,f::Array{Array{T,1},N},
         fSize::Array{NTuple{N, Int}},fIndex::Array{Int,1})
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/gcmvector.jl#L4-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.gcmfaces"><a class="docstring-binding" href="#MeshArrays.gcmfaces"><code>MeshArrays.gcmfaces</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">gcmfaces{T, N}</code></pre><p>gcmfaces data structure. Available constructors:</p><pre><code class="language-julia hljs">gcmfaces{T,N}(grid::gcmgrid,f::Array{Array{T,N},1},
         fSize::Array{NTuple{N, Int}}, aSize::NTuple{N,Int})

gcmfaces(grid::gcmgrid,v1::Array{Array{T,N},1}) where {T,N}
gcmfaces(grid::gcmgrid,::Type{T},
         fSize::Array{NTuple{N, Int}}, aSize::NTuple{N,Int}) where {T,N}

gcmfaces(grid::gcmgrid)
gcmfaces(grid::gcmgrid,::Type{T})
gcmfaces(grid::gcmgrid,::Type{T},n3::Int)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/gcmfaces.jl#L5-L22">source</a></section></details></article><h2 id="2.-Grids-And-I/O"><a class="docs-heading-anchor" href="#2.-Grids-And-I/O">2. Grids And I/O</a><a id="2.-Grids-And-I/O-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Grids-And-I/O" title="Permalink"></a></h2><p>Grid definitions :</p><article><details class="docstring" open="true"><summary id="MeshArrays.GridSpec"><a class="docstring-binding" href="#MeshArrays.GridSpec"><code>MeshArrays.GridSpec</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridSpec(category=&quot;default&quot;,
    path=tempname(); np=nothing, ID=:unknown)</code></pre><ul><li>Select one of the pre-defined grids <ul><li>either by <code>category</code> parameter (e.g. &quot;default&quot; or &quot;ones&quot;)</li><li>or by <code>ID</code> keyword via <code>MeshArrays.GridSpec_default</code> or <code>MeshArrays.GridSpec_MITgcm</code>)</li></ul></li><li>Return the corresponding <code>gcmgrid</code><ul><li>including in <code>path</code> either a path to grid files or a placeholder like <code>_ones</code> or <code>_default</code>.</li></ul></li></ul><pre><code class="language-julia hljs">using MeshArrays
γ=GridSpec()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/main.jl#L2-L16">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.GridSpec_default"><a class="docstring-binding" href="#MeshArrays.GridSpec_default"><code>MeshArrays.GridSpec_default</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridSpec_default(xy=NamedTuple(); ID=:unknown, ioPrec=Float64, tile=[])</code></pre><ul><li>Select one of the pre-defined grids <ul><li>or by providing <code>xy</code> parameter (a <code>NamedTuple</code> that includes <code>:xc, :yc, :xg, :yg</code>)</li><li>either by <code>ID</code> keyword (e.g., <code>:OISST</code>, <code>:Oscar</code>, or <code>:IAP</code> by default)</li></ul></li><li>Return the corresponding <code>gcmgrid</code><ul><li>incl. <code>path=&quot;_default&quot;</code></li></ul></li></ul><p>Example:</p><pre><code class="language-julia hljs">using MeshArrays
a = MeshArrays.GridSpec_default(ID=:OISST)
b = MeshArrays.GridSpec_default(MeshArrays.Grids_simple.xy_OISST(),tile=(1440,1020))
c = MeshArrays.GridSpec_default(MeshArrays.Grids_simple.xy_OISST(),tile=(720,510))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/main.jl#L32-L49">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.GridSpec_MITgcm"><a class="docstring-binding" href="#MeshArrays.GridSpec_MITgcm"><code>MeshArrays.GridSpec_MITgcm</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridSpec_MITgcm(category=&quot;PeriodicDomain&quot;, 
        path=tempname(); np=nothing, ID=:unknown)</code></pre><ul><li>Select one of the pre-defined grids <ul><li>or by <code>category</code> parameter</li><li>either by <code>ID</code> keyword</li></ul></li><li>Return the corresponding <code>gcmgrid</code><ul><li>incl. path to grid files (<code>path</code>).</li></ul></li></ul><p>Input files for these fully supported grids get  downloaded internally via <code>MeshArrays.Dataset</code> if needed.</p><ol><li>selection by <code>ID</code></li></ol><ul><li><code>:onedegree</code></li><li><code>:LLC90</code></li><li><code>:LLC270</code></li><li><code>:CS32</code></li><li><code>:default</code></li></ul><p>Example:</p><pre><code class="language-julia hljs">using MeshArrays
g = GridSpec(ID=:LLC90)</code></pre><ol><li>by <code>category</code> and <code>path</code></li></ol><ul><li><code>&quot;PeriodicDomain&quot;</code> (default)</li><li><code>&quot;PeriodicChannel&quot;</code></li><li><code>&quot;CubeSphere&quot;</code></li><li><code>&quot;LatLonCap&quot;</code>`</li></ul><p>Examples:</p><pre><code class="language-julia hljs">using MeshArrays
g = GridSpec(&quot;CubeSphere&quot;,MeshArrays.Dataset(&quot;GRID_CS32&quot;),ioPrec=Float32)
isa(g,gcmgrid)</code></pre><p>When the <code>np</code> keyword argument is specified then it is used  to set the number of points in each grid subdomain.</p><p>Example:</p><pre><code class="language-julia hljs">using MeshArrays
g = GridSpec(&quot;LatLonCap&quot;,np=270)
isa(g,gcmgrid)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/MITgcm.jl#L5-L66">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.Grids_simple.GridSpec_ones"><a class="docstring-binding" href="#MeshArrays.Grids_simple.GridSpec_ones"><code>MeshArrays.Grids_simple.GridSpec_ones</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridSpec_ones(grTp; ioPrec=Float64,nP=10,nF=1)</code></pre><p>Define grid where all variables will be set to one via <code>GridLoad_ones</code>.</p><ul><li>Possible values for <code>grTp</code>` : &quot;LatLonCap&quot;,&quot;CubeSphere&quot;,&quot;PeriodicChannel&quot;,&quot;PeriodicDomain&quot;.</li><li><code>nP</code> : number of points at each subdomain edge.</li><li><code>nF</code> (only for &quot;PeriodicChannel&quot;, &quot;PeriodicDomain&quot; grids) : number of subdomains.</li></ul><pre><code class="language-julia hljs">using MeshArrays
γ=MeshArrays.GridSpec_ones(&quot;CubeSphere&quot;)
Γ=MeshArrays.GridLoad_ones(γ;option=&quot;full&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/simple.jl#L8-L22">source</a></section></details></article><p>Loading grids :</p><article><details class="docstring" open="true"><summary id="MeshArrays.GridLoad"><a class="docstring-binding" href="#MeshArrays.GridLoad"><code>MeshArrays.GridLoad</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridLoad(γ=GridSpec(); ID=:default, option=:minimal, verbose=false)</code></pre><ul><li>Return a <code>NamedTuple</code> of grid variables read from files located in <code>γ.path</code> (see <code>?GridSpec</code>).</li><li>if <code>ID</code> is specified then call <code>GridSpec(ID=ID)</code> to override <code>γ</code> parameter.</li><li>option : <ul><li>option=:minimal (default) to get only grid cell center positions (XC, YC). </li><li>option=:light to get a complete set of 2D grid variables. </li><li>option=:full  to get a complete set of 2D &amp; 3D grid variables. </li></ul></li></ul><p>For grid variables, we follow the MITgcm naming convention. Grid variables thus typically include :</p><ul><li>XC, XG, YC, YG, AngleCS, AngleSN, Depth</li><li>RAC, RAW, RAS, RAZ, DXC, DXG, DYC, DYG</li><li>three-dimensional : hFacC, hFacS, hFacW</li><li>one-dimensional : DRC, DRF, RC, RF</li></ul><p>For additional detail please refer to the MITgcm documentation : </p><p>https://mitgcm.readthedocs.io/en/latest/algorithm/algorithm.html#spatial-discretization-of-the-dynamical-equations</p><pre><code class="language-julia hljs">using MeshArrays
γ = GridSpec(ID=:LLC90)
Γ = GridLoad(γ;option=&quot;full&quot;)

isa(Γ.XC,MeshArray)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/main.jl#L95-L128">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.GridLoad_default"><a class="docstring-binding" href="#MeshArrays.GridLoad_default"><code>MeshArrays.GridLoad_default</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridLoad_default(γ=GridSpec())</code></pre><pre><code class="language-julia hljs">MeshArrays.GridSpec_default(ID=:IAP)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/main.jl#L303-L309">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.Grids_simple.GridLoad_ones"><a class="docstring-binding" href="#MeshArrays.Grids_simple.GridLoad_ones"><code>MeshArrays.Grids_simple.GridLoad_ones</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridLoad_ones(γ::gcmgrid;option=&quot;minimal&quot;)</code></pre><p>Generate a unit grid, where every grid spacing and area is 1,  as specified by <code>γ</code> obtained from <code>GridSpec_ones</code>. </p><pre><code class="language-julia hljs">using MeshArrays
γ=MeshArrays.GridSpec_ones(&quot;CubeSphere&quot;,6,20);
Γ=MeshArrays.GridLoad_ones(γ;option=&quot;full&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/simple.jl#L50-L61">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.GridLoadVar"><a class="docstring-binding" href="#MeshArrays.GridLoadVar"><code>MeshArrays.GridLoadVar</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">GridLoadVar(nam::String,γ::gcmgrid)</code></pre><p>Return a grid variable read from files located in <code>γ.path</code> (see <code>?GridSpec</code>, <code>?GridLoad</code>).</p><p>Based on the MITgcm naming convention, grid variables are:</p><ul><li>XC, XG, YC, YG, AngleCS, AngleSN, hFacC, hFacS, hFacW, Depth.</li><li>RAC, RAW, RAS, RAZ, DXC, DXG, DYC, DYG.</li><li>DRC, DRF, RC, RF (one-dimensional)</li></ul><p>MITgcm documentation : </p><p>https://mitgcm.readthedocs.io/en/latest/algorithm/algorithm.html#spatial-discretization-of-the-dynamical-equations</p><pre><code class="language-julia hljs">using MeshArrays

γ = GridSpec(&quot;CubeSphere&quot;,MeshArrays.Dataset(&quot;GRID_CS32&quot;),ioPrec=Float32)
XC = GridLoadVar(&quot;XC&quot;,γ)

isa(XC,MeshArray)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/main.jl#L170-L197">source</a></section></details></article><h3 id="Functionalities"><a class="docs-heading-anchor" href="#Functionalities">Functionalities</a><a id="Functionalities-1"></a><a class="docs-heading-anchor-permalink" href="#Functionalities" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="MeshArrays.Tiles"><a class="docstring-binding" href="#MeshArrays.Tiles"><code>MeshArrays.Tiles</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Tiles(γ::gcmgrid,ni::Int,nj::Int)</code></pre><p>Define sudomain <code>tiles</code> of size <code>ni,nj</code>. Each tile is defined by a <code>Dict</code> where <code>tile,face,i,j</code> correspond to tile ID, face ID, index ranges.</p><pre><code class="language-julia hljs">using MeshArrays
γ=GridSpec(&quot;LatLonCap&quot;,MeshArrays.Dataset(&quot;GRID_LLC90&quot;))
τ=Tiles(γ,30,30)

isa(τ[1],NamedTuple)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/tiles.jl#L2-L19">source</a></section><section><div><pre><code class="language-julia hljs">Tiles(τ::Array{Dict},x::AbstractMeshArray)</code></pre><p>Return an <code>Array</code> of tiles which cover <code>x</code> according to tile partition <code>τ</code>.</p><pre><code class="language-julia hljs">using MeshArrays
γ=GridSpec(&quot;LatLonCap&quot;,MeshArrays.Dataset(&quot;GRID_LLC90&quot;))
d=γ.read(γ.path*&quot;Depth.data&quot;,MeshArray(γ,γ.ioPrec))
τ=Tiles(γ,30,30)
td=Tiles(τ,d)

D=similar(d)
Tiles!(τ,td,D)

isa(td[1],Array)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/tiles.jl#L39-L60">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.Tiles!"><a class="docstring-binding" href="#MeshArrays.Tiles!"><code>MeshArrays.Tiles!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Tiles!(τ::Array,tx::Array,x::AbstractMeshArray)</code></pre><p>Map tiles in <code>tx</code> according to tile partition <code>τ</code> into <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/grids/tiles.jl#L76-L80">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.exchange"><a class="docstring-binding" href="#MeshArrays.exchange"><code>MeshArrays.exchange</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">exchange(fld::AbstractMeshArray)</code></pre><p>Exchange / transfer data between neighboring arrays. Other methods are</p><pre><code class="language-julia hljs">exchange(fld::AbstractMeshArray,N::Integer)
exchange(u::AbstractMeshArray,v::AbstractMeshArray)
exchange(u::AbstractMeshArray,v::AbstractMeshArray,N::Integer)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/exchanges/main.jl#L7-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.read"><a class="docstring-binding" href="#Base.read"><code>Base.read</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">read(fil::String,x::AbstractMeshArray)</code></pre><p>Read array from file and return as a MeshArray. </p><p><em>The second argument (MeshArray or gcmgrid) provides the grid specifications (x.grid.ioSize).</em> ```</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/ReadWrite.jl#L16-L23">source</a></section><section><div><pre><code class="language-julia hljs">read(xx::Array,γ::gcmgrid)</code></pre><p>Reformat Array data into a MeshArray shaped after <code>γ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/ReadWrite.jl#L38-L42">source</a></section><section><div><pre><code class="language-julia hljs">read(xx::Array,x::AbstractMeshArray)</code></pre><p>Reformat Array data into a MeshArray similar to <code>x</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/ReadWrite.jl#L74-L78">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.read!"><a class="docstring-binding" href="#Base.read!"><code>Base.read!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">read!(xx::Array,x::AbstractMeshArray)</code></pre><p>Reformat array into MeshArray and write into <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/ReadWrite.jl#L85-L89">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.write"><a class="docstring-binding" href="#Base.write"><code>Base.write</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">write(fil::String,x::AbstractMeshArray)</code></pre><p>Write MeshArray to binary file. Other methods:</p><pre><code class="language-julia hljs">write(xx::Array,x::AbstractMeshArray) #to Array</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/ReadWrite.jl#L143-L151">source</a></section></details></article><h2 id="3.-Interpolation"><a class="docs-heading-anchor" href="#3.-Interpolation">3. Interpolation</a><a id="3.-Interpolation-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Interpolation" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="MeshArrays.interpolation_setup"><a class="docstring-binding" href="#MeshArrays.interpolation_setup"><code>MeshArrays.interpolation_setup</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">interpolation_setup(fil::String)</code></pre><p>Read e.g. <code>interp_coeffs_halfdeg.jld2</code></p><pre><code class="language-julia hljs">fil=joinpath(tempdir(),&quot;interp_coeffs_halfdeg.jld2&quot;)
λ=MeshArrays.interpolation_setup(fil)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L223-L232">source</a></section><section><div><pre><code class="language-julia hljs">interpolation_setup(;Γ,lon,lat,filename)</code></pre><p>Download or recompute interpolation coefficients.</p><ul><li><code>λ=interpolation_setup()</code> to download &quot;interp<em>coeffs</em>halfdeg.jld2&quot; </li><li><code>λ=interpolation_setup(Γ=Γ)</code> to recompute interpolation to <code>lon,lat</code></li><li><code>λ=interpolation_setup(Γ=Γ,lon=lon,lat=lat,filename=filename)</code> to    recompute interpolation to <code>lon,lat</code> and save to location and file <code>filename</code>,   defaulting to <code>tempname()*&quot;_interp_coeffs.jld2&quot;</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L238-L248">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.Interpolate"><a class="docstring-binding" href="#MeshArrays.Interpolate"><code>MeshArrays.Interpolate</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Interpolate(z_in::AbstractMeshArray,f,i,j,w)</code></pre><pre><code class="language-julia hljs">using MeshArrays
path=MeshArrays.Dataset(&quot;GRID_LLC90&quot;)
γ=GridSpec(&quot;LatLonCap&quot;,path)
Γ=GridLoad(γ; option=&quot;full&quot;)

lon=[i for i=-179.5:1.0:179.5, j=-89.5:1.0:89.5]
lat=[j for i=-179.5:1.0:179.5, j=-89.5:1.0:89.5]
(f,i,j,w,j_f,j_x,j_y)=InterpolationFactors(Γ,vec(lon),vec(lat))
DD=Interpolate(Γ.Depth,f,i,j,w)

using CairoMakie
heatmap(vec(lon[:,1]),vec(lat[1,:]),DD,colorrange=(0.,6000.))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L54-L71">source</a></section><section><div><pre><code class="language-julia hljs">Interpolate(z_in::AbstractMeshArray,f,i,j,w)</code></pre><pre><code class="language-julia hljs">using MeshArrays
path=MeshArrays.Dataset(&quot;GRID_LLC90&quot;)
γ=GridSpec(&quot;LatLonCap&quot;,path)
Γ=GridLoad(γ; option=&quot;full&quot;)

lon=[i for i=-179.5:1.0:179.5, j=-89.5:1.0:89.5]
lat=[j for i=-179.5:1.0:179.5, j=-89.5:1.0:89.5]
(f,i,j,w,j_f,j_x,j_y)=InterpolationFactors(Γ,vec(lon),vec(lat))
L=(lon=lon, lat=lat, f=f, i=i, j=j, w=w)

using CairoMakie
heatmap(Interpolate(Γ.Depth,L)...,colorrange=(0.,6000.))</code></pre><p>or </p><pre><code class="language-julia hljs">heatmap(Γ.Depth,interpolation=L,colorrange=(0.,6000.))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L84-L107">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.InterpolationFactors"><a class="docstring-binding" href="#MeshArrays.InterpolationFactors"><code>MeshArrays.InterpolationFactors</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">InterpolationFactors(Γ,lon::Array{T,1},lat::Array{T,1})</code></pre><p>Compute interpolation coefficients etc from grid <code>Γ</code> to <code>lon,lat</code></p><pre><code class="language-julia hljs">using MeshArrays
path=MeshArrays.Dataset(&quot;GRID_CS32&quot;)
γ=GridSpec(&quot;CubeSphere&quot;,path,ioPrec=Float32)
Γ=GridLoad(γ; option=&quot;full&quot;)
lon=collect(45.:0.1:46.); lat=collect(60.:0.1:61.)
(f,i,j,w,j_f,j_x,j_y)=InterpolationFactors(Γ,lon,lat)
YC=Interpolate(Γ.YC,f,i,j,w)
extrema(i)==(9,10)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L114-L133">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.StereographicProjection"><a class="docstring-binding" href="#MeshArrays.StereographicProjection"><code>MeshArrays.StereographicProjection</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">StereographicProjection(XC0,YC0,XC,YC)</code></pre><p>Apply stereographic projection that puts <code>XC0,YC0</code> at <code>0.0,0.0</code> to target point(s) <code>XC,YC</code></p><pre><code class="language-julia hljs">lon=collect(45.:0.1:46.); lat=collect(60.:0.1:61.)
x,y=StereographicProjection(45.,60.,lon,lat)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L268-L278">source</a></section></details></article><article><details class="docstring" open="true"><summary id="NearestNeighbors.knn"><a class="docstring-binding" href="#NearestNeighbors.knn"><code>NearestNeighbors.knn</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">knn(xgrid,ygrid::AbstractMeshArray,x,y::Array{T,1},k::Int)</code></pre><p>Find k nearest neighbors to each point in x,y on xgrid,ygrid</p><pre><code class="language-julia hljs">lon=collect(0.1:0.5:2.1); lat=collect(0.1:0.5:2.1);
(f,i,j,c)=knn(Γ.XC,Γ.YC,lon,lat)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Interpolation.jl#L5-L14">source</a></section></details></article><h2 id="4.-Vector-Fields"><a class="docs-heading-anchor" href="#4.-Vector-Fields">4. Vector Fields</a><a id="4.-Vector-Fields-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Vector-Fields" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="MeshArrays.curl"><a class="docstring-binding" href="#MeshArrays.curl"><code>MeshArrays.curl</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">curl(u::AbstractMeshArray,v::AbstractMeshArray,Γ::NamedTuple)</code></pre><p>Compute curl of a velocity field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L128-L132">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.convergence"><a class="docstring-binding" href="#MeshArrays.convergence"><code>MeshArrays.convergence</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">convergence(uFLD::AbstractMeshArray,vFLD::AbstractMeshArray)</code></pre><p>Compute convergence of a vector field</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L275-L279">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.gradient"><a class="docstring-binding" href="#MeshArrays.gradient"><code>MeshArrays.gradient</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">gradient(inFLD::AbstractMeshArray,Γ::NamedTuple)</code></pre><p>Compute spatial derivatives. Other methods:</p><pre><code class="language-julia hljs">gradient(inFLD::AbstractMeshArray,Γ::NamedTuple,doDIV::Bool)
gradient(inFLD::AbstractMeshArray,iDXC::AbstractMeshArray,iDYC::AbstractMeshArray)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L27-L35">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.ScalarPotential"><a class="docstring-binding" href="#MeshArrays.ScalarPotential"><code>MeshArrays.ScalarPotential</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ScalarPotential(TrspCon)</code></pre><p>Scalar potential inversion.</p><pre><code class="language-julia hljs">TrspPot=ScalarPotential(TrspCon)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Solvers.jl#L130-L137">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.VectorPotential"><a class="docstring-binding" href="#MeshArrays.VectorPotential"><code>MeshArrays.VectorPotential</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">VectorPotential(TrspX,TrspY,Γ,method::Int=1)</code></pre><p>Vector potential inversion.</p><pre><code class="language-julia hljs">TrspPot=ScalarPotential(TrspCon)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Solvers.jl#L156-L163">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.ThroughFlow"><a class="docstring-binding" href="#MeshArrays.ThroughFlow"><code>MeshArrays.ThroughFlow</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ThroughFlow(VectorField,IntegralPath,Γ::NamedTuple)</code></pre><p>Compute transport through an integration path</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L378-L382">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.UVtoTransport"><a class="docstring-binding" href="#MeshArrays.UVtoTransport"><code>MeshArrays.UVtoTransport</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">UVtoTransport(U,V,G::NamedTuple)</code></pre><p>Convert e.g. velocity (m/s) to transport (m^3/s) by multiplying by <code>DRF</code> and <code>DXG</code>,<code>DYG</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L640-L644">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.UVtoUEVN"><a class="docstring-binding" href="#MeshArrays.UVtoUEVN"><code>MeshArrays.UVtoUEVN</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">UVtoUEVN(u,v,G::NamedTuple)</code></pre><ol><li>Interpolate to grid cell centers (uC,vC)</li><li>Convert to <code>Eastward/Northward</code> components (uE,vN)</li></ol><p>Note: land masking <code>u,v</code> with <code>NaN</code>s preemptively can be adequate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L602-L609">source</a></section></details></article><h2 id="5.-Integration"><a class="docs-heading-anchor" href="#5.-Integration">5. Integration</a><a id="5.-Integration-1"></a><a class="docs-heading-anchor-permalink" href="#5.-Integration" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="MeshArrays.Integration.loops"><a class="docstring-binding" href="#MeshArrays.Integration.loops"><code>MeshArrays.Integration.loops</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">loops(mask::gridmask; files=String[], var=:THETA, rd=read)</code></pre><pre><code class="language-julia hljs">begin
  @everywhere using MeshArrays, MITgcm
  @everywhere rd(F,var,tim,tmp)=read(read_mdsio(F,var),tmp)
  @everywhere G,M,files=Integration.example()
    #,regions=(30,10),depths=Integration.DEPTHS)
end;

H=Integration.loops(M,files=files,rd=rd)
# Hbis=Integration.streamlined_loop(M,files=files,rd=rd)</code></pre><p>and to save results:</p><pre><code class="language-julia hljs">using JLD2; output_path=&quot;test.jld2&quot;
jldsave(output_path; depths=M.depths, integral=H, volume=vol, name=M.names)</code></pre><p>where vol is calculated as follows:</p><pre><code class="language-julia hljs">#option=:loops
allones=1.0 .+0*G.hFacC
M.tmp2d.=M.v_int[1](allones)
vol=[b(M.tmp2d) for b in M.h_sum]</code></pre><p>or </p><pre><code class="language-julia hljs">#option=:streamlined_loop
allones=1.0 .+0*G.hFacC
vol=[b(allones) for b in M.h_sum]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Integration.jl#L169-L207">source</a></section></details></article><h2 id="6.-Grid-Data-Sets"><a class="docs-heading-anchor" href="#6.-Grid-Data-Sets">6. Grid Data Sets</a><a id="6.-Grid-Data-Sets-1"></a><a class="docs-heading-anchor-permalink" href="#6.-Grid-Data-Sets" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="MeshArrays.Dataset"><a class="docstring-binding" href="#MeshArrays.Dataset"><code>MeshArrays.Dataset</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Dataset(d::String; do_read=true, verbose=false)</code></pre><ul><li>get folder name for dataset <code>d</code>. </li><li>download dataset if needed.</li><li>read content if <code>do_read</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Datasets.jl#L3-L10">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.mydatadep"><a class="docstring-binding" href="#MeshArrays.mydatadep"><code>MeshArrays.mydatadep</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">mydatadep(nam=&quot;countries_shp1&quot;)</code></pre><p>Download data dependency with predefined name; currently :</p><pre><code class="language-julia hljs">&quot;countries_shp1&quot;
&quot;countries_geojson1&quot;
&quot;basemap_jpg1&quot;
&quot;interp_halfdeg&quot;
&quot;oceans_geojson1&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/ext/MeshArraysDataDepsExt.jl#L32-L44">source</a></section></details></article><h2 id="7.-Polygons"><a class="docs-heading-anchor" href="#7.-Polygons">7. Polygons</a><a id="7.-Polygons-1"></a><a class="docs-heading-anchor-permalink" href="#7.-Polygons" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="MeshArrays.NamedPolygon"><a class="docstring-binding" href="#MeshArrays.NamedPolygon"><code>MeshArrays.NamedPolygon</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>struct NamedPolygon     geometry::Vector{Tuple{Float32, Float32}}     name::String     points::Vector{} end</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/polygons.jl#L2-L8">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.polyarray"><a class="docstring-binding" href="#MeshArrays.polyarray"><code>MeshArrays.polyarray</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>struct polyarray    name::String    f::Array{NamedPolygon} end</p><pre><code class="language-julia hljs">using MeshArrays, GeoJSON, DataDeps
pol=MeshArrays.Dataset(&quot;oceans_geojson1&quot;)

write(pol,tempname()*&quot;.json&quot;)

using CairoMakie
lines(pol)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/polygons.jl#L15-L30">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.to_Polygon"><a class="docstring-binding" href="#MeshArrays.to_Polygon"><code>MeshArrays.to_Polygon</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">to_Polygon(pa::polyarray)</code></pre><p>Convert <code>polyarray</code> into a <code>GI.Polygon</code> array.</p><pre><code class="language-julia hljs">pol_P,nams=MeshArrays.to_Polygon(pol)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/polygons.jl#L65-L73">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.to_polyarray"><a class="docstring-binding" href="#MeshArrays.to_polyarray"><code>MeshArrays.to_polyarray</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs"> to_polyarray(pol)</code></pre><p>Convert polygon data into a <code>polyarray</code>.</p><pre><code class="language-julia hljs">fil=&quot;countries.geojson&quot;
MeshArrays.to_polyarray(GeoJSON.read(fil))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/types/polygons.jl#L40-L49">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.within_pol"><a class="docstring-binding" href="#MeshArrays.within_pol"><code>MeshArrays.within_pol</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">within_pol(pol; ID=1)</code></pre><p>Generate a <code>name,rule</code> pair to test if location      <code>lon,lat</code> is within polygon <code>pol[ID].geometry</code>.</p><pre><code class="language-julia hljs">using MeshArrays, DataDeps, GeoJSON, GeometryOps
fil=MeshArrays.Dataset(&quot;oceans_geojson1&quot;,do_read=false)
pol=MeshArrays.read_json(fil,format=:GeoJSON)

name,rule=MeshArrays.within_pol(pol; ID=11)
rule(-30,40)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/extensions.jl#L43-L57">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.read_json"><a class="docstring-binding" href="#MeshArrays.read_json"><code>MeshArrays.read_json</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">read_json(fil; format=:polyarray)</code></pre><p>Call <code>GeoJSON.read</code> and return <code>polyarray</code> (default)</p><ul><li>format <code>:polyarray</code><code>(default): return</code>polyarray`</li><li>format <code>:coord</code> : convert to <code>GI.coordinates</code>.</li><li>format <code>:GeoJSON</code> : return FeatureCollection (vector of name,geom pairs)</li></ul><pre><code class="language-julia hljs">import MeshArrays, DataDeps, GeoJSON
pol=MeshArrays.Dataset(&quot;oceans_geojson1&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/extensions.jl#L27-L40">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.read_shp"><a class="docstring-binding" href="#MeshArrays.read_shp"><code>MeshArrays.read_shp</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">read_shp(fil; format=:polyarray)</code></pre><p>Call <code>Shapefile.Table</code> and <code>Shapefile.shapes</code> and return <code>polyarray</code> (default).</p><ul><li>format <code>:polyarray</code> (default) : return <code>polyarray</code></li><li>format <code>:Shapefile</code> : return vector of <code>name,geometry</code>` named tuples.</li><li>format <code>:coord</code> : convert to <code>GI.coordinates</code>.</li></ul><pre><code class="language-julia hljs">using MeshArrays, DataDeps, Shapefile
fil=MeshArrays.Dataset(&quot;countries_shp1&quot;)

using CairoMakie
lines(pol)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/extensions.jl#L7-L24">source</a></section></details></article><h2 id="8.-Other"><a class="docs-heading-anchor" href="#8.-Other">8. Other</a><a id="8.-Other-1"></a><a class="docs-heading-anchor-permalink" href="#8.-Other" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="MeshArrays.LatitudeCircles"><a class="docstring-binding" href="#MeshArrays.LatitudeCircles"><code>MeshArrays.LatitudeCircles</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">LatitudeCircles(LatValues,Γ::NamedTuple; format=:gridpath, range=(0.0,360.0))</code></pre><p>Compute integration paths that follow latitude circles, within the specified longitude <code>range</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L452-L456">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.Transect"><a class="docstring-binding" href="#MeshArrays.Transect"><code>MeshArrays.Transect</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Transect(name,lons,lats,Γ; segment=:short, format=:gridpath)</code></pre><p>Compute integration paths that follow a great circle between two geolocations give by <code>lons</code>, <code>lats</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/Operations.jl#L547-L552">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.demo.ocean_basins"><a class="docstring-binding" href="#MeshArrays.demo.ocean_basins"><code>MeshArrays.demo.ocean_basins</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ocean_basins()</code></pre><p>Mask of ocean basins on ECCO grid (LLC90).</p><pre><code class="language-julia hljs">basins=demo.ocean_basins()
AtlExt=extended_basin(basins,:Atl)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/demo.jl#L110-L119">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.demo.extended_basin"><a class="docstring-binding" href="#MeshArrays.demo.extended_basin"><code>MeshArrays.demo.extended_basin</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">extended_basin(basins,ID=:Atl)</code></pre><p>Consolidate basins mask to include marginal seas. </p><p>note : has only be tested on the ECCO grid (LLC90). </p><pre><code class="language-julia hljs">basins=demo.ocean_basins()
AtlExt=extended_basin(basins,:Atl)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/demo.jl#L135-L146">source</a></section></details></article><article><details class="docstring" open="true"><summary id="MeshArrays.isosurface"><a class="docstring-binding" href="#MeshArrays.isosurface"><code>MeshArrays.isosurface</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">isosurface(θ,T,Γ)</code></pre><p>Depth of isosurface θ=T</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/MeshArrays.jl/blob/5e74839f09948b99e27f627e1b1009e03cdcf810/src/VerticalDimension.jl#L1-L5">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorials/">« Notebook Tutorials</a><a class="docs-footer-nextpage" href="../detail/">Internals »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Sunday 18 January 2026 23:51">Sunday 18 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
